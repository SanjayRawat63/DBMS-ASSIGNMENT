Enter password: ************
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 12
Server version: 8.0.20 MySQL Community Server - GPL

Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> delimiter ##
mysql> show databases##
+--------------------+
| Database           |
+--------------------+
| assgn3             |
| assgn4             |
| information_schema |
| mysql              |
| performance_schema |
| person             |
| sakila             |
| southwind          |
| sys                |
| test               |
| world              |
+--------------------+
11 rows in set (0.00 sec)

mysql> use southwind##
Database changed
mysql> create procedure FindName(IN sid Int,OUT fn varchar(20))
    -> BEGIN
    -> DECLARE cur curs for
    -> select name
    -> from student
    -> where id=sid;
    -> open cur^C
mysql> create procedure FindName(IN sid Int,OUT fn varchar(20))
    -> BEGIN
    -> DECLARE cur cursor for
    -> select name
    -> from student
    -> where id=sid;
    -> open cut;
    -> ^C
mysql> select * from student##
+----+--------+------+
| ID | NAME   | AGE  |
+----+--------+------+
|  1 | SANJAY |   21 |
|  2 | ATUL   |   20 |
|  3 | RAWAT  |   18 |
|  4 | ANJALI |   18 |
|  4 | arun   |   20 |
+----+--------+------+
5 rows in set (0.00 sec)

mysql> create procedure FindName(IN sid Int,OUT fn varchar(20))
    -> BEGIN
    -> DECLARE cur cursor for
    -> select name
    -> from student
    -> where id = sid;
    -> open cur;
    -> fetch cur Into fn;
    -> close cur;
    -> End;
    -> ##
Query OK, 0 rows affected (0.65 sec)

mysql> call FindName(1,@name)##
Query OK, 0 rows affected (0.11 sec)

mysql> call FindName(1,@sanjay)##
Query OK, 0 rows affected (0.00 sec)

mysql> call FindName(5,@sanjay)##
ERROR 1329 (02000): No data - zero rows fetched, selected, or processed
mysql> call FindName(5,@sanjay)##
ERROR 1329 (02000): No data - zero rows fetched, selected, or processed
mysql> select @name##
+--------+
| @name  |
+--------+
| SANJAY |
+--------+
1 row in set (0.00 sec)

mysql> call FindName(2,@sanjay)##
Query OK, 0 rows affected (0.00 sec)

mysql> select @name##
+--------+
| @name  |
+--------+
| SANJAY |
+--------+
1 row in set (0.00 sec)

mysql> call FindName(2,@name)##
Query OK, 0 rows affected (0.00 sec)

mysql> select @name##
+-------+
| @name |
+-------+
| ATUL  |
+-------+
1 row in set (0.00 sec)

mysql> call FindName(5,@name)##
ERROR 1329 (02000): No data - zero rows fetched, selected, or processed
mysql> select @name##
+-------+
| @name |
+-------+
| ATUL  |
+-------+
1 row in set (0.00 sec)

mysql> create procedure FindName(IN sid Int,OUT fn varchar(20))
    -> BEGIN
    -> BEGIN^C
mysql> drop procedure FindName##
Query OK, 0 rows affected (0.28 sec)

mysql> create procedure FindName(IN sid Int,OUT fn varchar(20))
    -> BEGIN
    -> DECLARE cur cursor for
    -> select name
    -> from student
    -> where id = sid;
    -> Declare EXIT handler for not found
    -> select 'record not found' as 'error message';
    -> open cur;
    -> fetch cut into fn;
    -> close cur;
    -> end;
    -> ##
ERROR 1324 (42000): Undefined CURSOR: cut
mysql> create procedure FindName(IN sid Int,OUT fn varchar(20))
    -> BEGIN
    -> DECLARE cur cursor for
    -> select name
    -> from student
    -> where id = sid;
    -> Declare EXIT handler for not found
    -> select 'record not found' as 'error message';
    -> open cur;
    -> fetch cur into fn;
    -> close cur;
    -> end;
    -> ##
Query OK, 0 rows affected (0.13 sec)

mysql> call FindName(5,@name)##
+------------------+
| error message    |
+------------------+
| record not found |
+------------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.01 sec)

mysql> select @name##
+-------+
| @name |
+-------+
| NULL  |
+-------+
1 row in set (0.00 sec)

mysql> call FindName(1,@name)##
Query OK, 0 rows affected (0.00 sec)

mysql> select @name##
+--------+
| @name  |
+--------+
| SANJAY |
+--------+
1 row in set (0.00 sec)

mysql> call FindName(4,@name)##
Query OK, 0 rows affected (0.00 sec)

mysql> select @name##
+--------+
| @name  |
+--------+
| ANJALI |
+--------+
1 row in set (0.00 sec)

mysql> select @name##
+--------+
| @name  |
+--------+
| ANJALI |
+--------+
1 row in set (0.00 sec)

mysql> show tables##
+---------------------+
| Tables_in_southwind |
+---------------------+
| department          |
| dependent           |
| dept_locations      |
| employee            |
| products            |
| project             |
| student             |
| student1            |
| works_on            |
+---------------------+
9 rows in set (0.01 sec)

mysql> select *from employee##
+---------+-------+------+------------+---------+--------+--------+-----------+------+
| Fname   | Lname | SSN  | Bdate      | Address | Gender | Salary | Super_ssn | Dno  |
+---------+-------+------+------------+---------+--------+--------+-----------+------+
| Sanjay  | Rawat | 1456 | 2000-06-03 | DDUN    | M      |  10000 | 101       |    1 |
| Anish   | Rawat | 1566 | 2015-10-10 | DANGI   | M      |  15000 | 110       |    4 |
| Preetam | Rawat | 1592 | 1993-12-31 | RPG     | M      |  25000 | 120       |    3 |
| Atul    | Rawat | 2903 | 2003-03-19 | AGM     | M      |   2000 | 102       |    2 |
| Anjali  | Rawat | 3123 | 2005-12-13 | RPG     | F      |  30000 | 103       |    3 |
+---------+-------+------+------------+---------+--------+--------+-----------+------+
5 rows in set (0.03 sec)

mysql> select *from department##
+----------+---------+---------+----------------+
| Dname    | Dnumber | Mgr_ssn | Mgr_start_date |
+----------+---------+---------+----------------+
| Computer |       1 | 1001    | 2019-02-24     |
| IT       |       2 | 1005    | 2018-12-04     |
| ENTC     |       3 | 1015    | 2020-06-12     |
| MECH     |       4 | 1115    | 2012-08-30     |
+----------+---------+---------+----------------+
4 rows in set (0.19 sec)

mysql> create table deptsal(
    -> dno int,
    -> totalsalary
    -> int
    -> );
    -> ##
Query OK, 0 rows affected (0.57 sec)

mysql> insert into deptsal(dno,totalsalary) values
    -> (1,0),
    -> (2,0),
    -> (3,0),
    -> (4,0)
    -> ;
    -> ##
Query OK, 4 rows affected (0.15 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> update deptsal set totalsalary=0##
Query OK, 0 rows affected (0.04 sec)
Rows matched: 4  Changed: 0  Warnings: 0

mysql> select *from deptsal##
+------+-------------+
| dno  | totalsalary |
+------+-------------+
|    1 |           0 |
|    2 |           0 |
|    3 |           0 |
|    4 |           0 |
+------+-------------+
4 rows in set (0.00 sec)

mysql> create procedure updatesalary()
    -> begin
    -> declare done int default 0;
    -> declare current int;
    -> declare dcurr cursor for select dno from deptsal;
    -> declare continue handler for not found set done=1;
    -> open dcurr;
    -> repeat
    -> fetch dcurr into current;
    -> update deptsal
    -> set totalsalary =(select sum(salary) from employee where dno=current)
    -> where dno=current;
    -> until done
    -> end repeat;
    -> close dcurr;
    -> end
    -> ##
Query OK, 0 rows affected (0.17 sec)

mysql> call updatesalary##
Query OK, 0 rows affected (0.70 sec)

mysql> select * from deptsalry##
ERROR 1146 (42S02): Table 'southwind.deptsalry' doesn't exist
mysql> select * from deptsal##
+------+-------------+
| dno  | totalsalary |
+------+-------------+
|    1 |       10000 |
|    2 |        2000 |
|    3 |       55000 |
|    4 |       15000 |
+------+-------------+
4 rows in set (0.00 sec)

mysql> create procedure hikesalary()
    -> begin
    -> declare done int default 0;
    -> declare current int;
    -> declare dcurr cursor for select dno form deptsal;
    -> declare continue handler for not found set done=1;
    -> open dcurr;
    -> repeat
    -> fetch dcurr into current;
    -> update deptsal
    -> set totalsalary=select(  (totalsalary+(0.15*totalsalary)) from employee where dno=current)
    -> where dno=current;
    -> until done
    -> end repeat;
    -> close dcurr;
    -> end
    -> ##
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'deptsal;
declare continue handler for not found set done=1;
open dcurr;
repeat
f' at line 5
mysql> create procedure hikesalary()
    -> create procedure hikesalary()
    -> ^C
mysql> create procedure hikesalary()
    -> begin
    -> declare done int default 0;
    -> declare current int;
    -> declare dcurr cursor for select dno from deptsal;
    -> declare continue handler for not found set done=1;
    -> open dcurr;
    -> repeat
    -> fetch dcurr into current;
    -> set totalsalary=select(  (totalsalary+(0.15*totalsalary)) from employee where dno=current)
    -> where dno=current;
    -> until done
    -> end repeat;
    -> close dcurr;
    -> End
    -> ##
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select(  (totalsalary+(0.15*totalsalary)) from employee where dno=current)
wher' at line 10
mysql> create procedure hikesalary()
    -> begin
    -> declare done int default 0;
    -> declare current int;
    -> declare dcurr cursor for select dno from deptsal;
    -> declare continue handler for not found set done=1;
    -> open dcurr;
    -> repeat
    -> fetch dcurr into current;
    -> set totalsalary= totalsalary+0.15*totalsalary
    -> where dno=current;
    -> until done
    -> end repeat;
    -> close dcurr;
    -> End
    -> ##
ERROR 1193 (HY000): Unknown system variable 'totalsalary'
mysql> create procedure hikesalary()
    -> begin
    -> declare done int default 0;
    -> declare current int;
    -> declare dcurr cursor for select dno from deptsal;
    -> declare continue handler for not found set done=1;
    -> open dcurr;
    -> repeat
    ->  fetch dcurr into current;
    -> update deptsal
    -> set totalsalary=(totalsalary+(0.2*totalsalary))
    -> where dno=current;
    -> until done
    ->  end repeat;
    ->  close dcurr;
    -> End
    -> ##
Query OK, 0 rows affected (0.19 sec)

mysql> call hikesalary()
    -> ##
Query OK, 1 row affected (0.46 sec)

mysql> select*from deptsal##
+------+-------------+
| dno  | totalsalary |
+------+-------------+
|    1 |       12000 |
|    2 |        2400 |
|    3 |       66000 |
|    4 |       21600 |
+------+-------------+
4 rows in set (0.00 sec)

mysql> drop procedure hikesalary()
    -> ##
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()' at line 1
mysql> drop procedure hikesalary##
Query OK, 0 rows affected (0.20 sec)

mysql> create procedure hikesalary()
    ->  begin
    ->  declare done int default 0;
    -> declare current int;
    ->  declare dcurr cursor for select dno from deptsal;
    ->  declare continue handler for not found set done=1;
    -> open dcurr;
    -> repeat
    ->  fetch dcurr into current;
    ->  update employee
    -> set salary=(salary+(0.1*salary))
    -> where dno=current;
    ->  until done
    ->  end repeat;
    ->  close dcurr;
    ->  End
    -> ##
Query OK, 0 rows affected (0.10 sec)

mysql> call hikesalary()##
Query OK, 1 row affected (0.57 sec)

mysql> select salary from employee##
+--------+
| salary |
+--------+
|  11000 |
|  18150 |
|  27500 |
|   2200 |
|  33000 |
+--------+
5 rows in set (0.08 sec)

mysql> select * from employee##
+---------+-------+------+------------+---------+--------+--------+-----------+------+
| Fname   | Lname | SSN  | Bdate      | Address | Gender | Salary | Super_ssn | Dno  |
+---------+-------+------+------------+---------+--------+--------+-----------+------+
| Sanjay  | Rawat | 1456 | 2000-06-03 | DDUN    | M      |  11000 | 101       |    1 |
| Anish   | Rawat | 1566 | 2015-10-10 | DANGI   | M      |  18150 | 110       |    4 |
| Preetam | Rawat | 1592 | 1993-12-31 | RPG     | M      |  27500 | 120       |    3 |
| Atul    | Rawat | 2903 | 2003-03-19 | AGM     | M      |   2200 | 102       |    2 |
| Anjali  | Rawat | 3123 | 2005-12-13 | RPG     | F      |  33000 | 103       |    3 |
+---------+-------+------+------------+---------+--------+--------+-----------+------+
5 rows in set (0.00 sec)

mysql>